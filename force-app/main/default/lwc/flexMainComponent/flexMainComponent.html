<!-- sldsValidatorIgnore -->
<!-- sldsValidatorIgnore -->
<template>
    <div class="slds-page-header slds-p-bottom_medium">
      <div class="slds-grid">    
        <div class="slds-col slds-has-flexi-truncate">       
          <p class="slds-text-title_caps slds-line-height_reset">Flexes</p>
          <h1 class="slds-page-header__title slds-m-right_small slds-align-middle slds-truncate"  title="My Contacts">Novo Preço / Manutenção de Negócio</h1>        
        </div>    
        <lightning-button class = "slds-p-right_small" variant="destructive" label = "Apagar todos os itens" title = "delete all items" icon-name = "utility:recycle_bin_full" onclick = {deleteAllRows}></lightning-button>   
      </div>  
    </div>
      <table class="slds-table slds-table_cell-buffer slds-table_bordered" aria-label="Example default base table of Opportunities">
          <thead>             
            <tr class="slds-line-height_reset">
              <th class="" scope="col">              
                  <lightning-input 
                      type = "checkbox" 
                      onchange= {selectAllCheckboxes}>
                  </lightning-input> 
                <div class="slds-truncate" title="Checkbox"></div>
              </th>
              <th class="" scope="col">
                <div class="slds-truncate" title="Line Number">NO</div>
              </th>
              <th class="" scope="col">
                <div class="slds-truncate" title="IBM">IBM</div>
              </th>
              <th class="" scope="col">
                <div class="slds-truncate" title="Base">Base</div>
              </th>
              <th class="" scope="col">
                <div class="slds-truncate" title="Produto">Produto</div>
              </th>
              <th class="" scope="col">
                <div class="slds-truncate" title="Preco">Preço</div>
              </th>
              <th class="" scope="col" style="width: 3rem"> </th>
            </tr>
          </thead>
  
          <tbody>
          <template for:each = {rows} for:item = "row">            
            <tr key = {row} class ="slds-hint-parent"> 
              <td>
                <lightning-input 
                    type = "checkbox"                                
                    data-index = {row.Id}
                    onchange= {selectCheckbox}>
                </lightning-input>                        
            </td>
              <td data-label="Line Number">
                <div class="slds-truncate" title="Cloudhub">{row.Id}</div>
              </td>
              <td data-label="IBM">
                <lightning-input name = 'ibmCode' required data-index = {row.Id} onkeyup = {searchForIBMs} onchange = {buildObjectOnChange} value = {row.ibmCode} type="text"></lightning-input>
              </td>            
              <td data-label="Base">
                <lightning-combobox name = 'baseCode' required data-index = {row.Id} onchange = {searchForIBMs} options = {row.basesCode}></lightning-combobox>
              </td>   
              <td>
                <lightning-combobox name="productCode" required data-index = {row.Id} onchange = {searchForIBMs} options = {row.productCodes} ></lightning-combobox>
              </td>   
              <td>
                <lightning-input name="productPrice" required data-index = {row.Id} onchange = {buildObjectOnChange} value = {row.productPrice} ></lightning-input>
              </td>   
              <td>
                <lightning-button-icon icon-name="utility:delete" data-index = {row.Id} alternative-text = "Remove" title = "Remove" onclick={deleteRow}></lightning-button-icon>
              </td>      
            </tr> 
            </template>         
          </tbody>        
        </table>         
      <!-- Footer -->
      <footer class="slds-modal__footer" style="padding: 0.50rem 1rem;">      
        <div class = "slds-align_absolute-center slds-p-bottom_x-small slds-p-horizontal_medium">
          <input name = 'rowsQuantity' value = {initialNumberOfRows} onchange = {setNumberOfRows}  type="number"/> 
        </div>          
        <lightning-button class = "slds-p-right_small" disabled = {isQuantityOfRowsNotDefined} variant = "neutral" label = "Adicionar item" title = "Adicionar itens" icon-name = "utility:add" onclick = {addRow}></lightning-button>      
        <lightning-button class = "slds-p-right_small" icon-name="utility:save" variant = "brand" label =" Salvar itens" title = "Salvar itens" onclick = {createAccounts}></lightning-button>      
      </footer>
  </template>